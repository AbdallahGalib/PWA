/* empty css           */
import { c as create_ssr_component, o as onDestroy, e as escape, a as add_attribute, b as each } from "./chunks/ssr.js";
import L from "leaflet";
/* empty css                    */
import "leaflet-draw";
const css = {
  code: `body{margin:0;padding:0;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;background:linear-gradient(135deg, #1a1f2c 0%, #2d3436 100%);color:#ffffff;min-height:100vh}main.svelte-kpzu9m.svelte-kpzu9m{min-height:100vh;display:flex;justify-content:center;align-items:center;padding:2rem}.app-container.svelte-kpzu9m.svelte-kpzu9m{width:100%;max-width:1200px;margin:0 auto}.content-container.svelte-kpzu9m.svelte-kpzu9m{display:flex;flex-direction:column;gap:1.5rem;align-items:center;background:rgba(255, 255, 255, 0.05);padding:2rem;border-radius:20px;box-shadow:0 8px 32px rgba(0, 0, 0, 0.1);backdrop-filter:blur(10px)}h1.svelte-kpzu9m.svelte-kpzu9m{color:#ffffff;font-size:2.5rem;text-align:center;font-weight:600;margin:0;text-shadow:0 2px 4px rgba(0, 0, 0, 0.2)}h3.svelte-kpzu9m.svelte-kpzu9m{color:#ffffff;font-size:1.5rem;margin:0 0 1rem 0;text-shadow:0 1px 2px rgba(0, 0, 0, 0.2)}.map-section.svelte-kpzu9m.svelte-kpzu9m{width:100%;padding:1rem;background:rgba(0, 0, 0, 0.2);border-radius:16px}.map-container.svelte-kpzu9m.svelte-kpzu9m{width:100%;height:500px;margin:20px 0;border-radius:8px;overflow:hidden;box-shadow:0 2px 4px rgba(0, 0, 0, 0.1)}.control-panel.svelte-kpzu9m.svelte-kpzu9m{display:flex;gap:1rem;justify-content:center;width:100%}.info-panel.svelte-kpzu9m.svelte-kpzu9m{display:grid;grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));gap:1.5rem;width:100%}.geofence-status.svelte-kpzu9m.svelte-kpzu9m,.geofence-list.svelte-kpzu9m.svelte-kpzu9m,.position-info.svelte-kpzu9m.svelte-kpzu9m{background:rgba(255, 255, 255, 0.1);padding:1.5rem;border-radius:12px;box-shadow:0 4px 12px rgba(0, 0, 0, 0.1)}.status-grid.svelte-kpzu9m.svelte-kpzu9m{display:flex;flex-direction:column;gap:1rem}.status-section.svelte-kpzu9m.svelte-kpzu9m{padding:1rem;border-radius:8px}.status-section.inside.svelte-kpzu9m.svelte-kpzu9m{background:rgba(76, 175, 80, 0.2);border-left:4px solid #4CAF50}.status-section.outside.svelte-kpzu9m.svelte-kpzu9m{background:rgba(244, 67, 54, 0.2);border-left:4px solid #f44336}.status-section.svelte-kpzu9m h4.svelte-kpzu9m{margin:0 0 0.5rem 0;color:#ffffff}.status-section.svelte-kpzu9m ul.svelte-kpzu9m{margin:0;padding-left:1.5rem;color:rgba(255, 255, 255, 0.9)}.position-grid.svelte-kpzu9m.svelte-kpzu9m{display:grid;gap:0.5rem}.position-item.svelte-kpzu9m.svelte-kpzu9m{display:flex;justify-content:space-between;align-items:center;padding:0.5rem;background:rgba(255, 255, 255, 0.05);border-radius:6px}.label.svelte-kpzu9m.svelte-kpzu9m{color:rgba(255, 255, 255, 0.7)}.value.svelte-kpzu9m.svelte-kpzu9m{font-family:monospace;font-size:1.1rem;color:#4CAF50}.no-data.svelte-kpzu9m.svelte-kpzu9m{color:rgba(255, 255, 255, 0.6);text-align:center;font-style:italic}.status-bar.svelte-kpzu9m.svelte-kpzu9m{width:100%;background:rgba(255, 255, 255, 0.1);padding:1rem;border-radius:8px;text-align:center}button.svelte-kpzu9m.svelte-kpzu9m{font-size:1rem;padding:0.75rem 1.5rem;border-radius:8px;border:none;cursor:pointer;font-weight:500;transition:all 0.2s ease;text-transform:uppercase;letter-spacing:0.5px}.primary-btn.svelte-kpzu9m.svelte-kpzu9m{background:linear-gradient(135deg, #4CAF50 0%, #45a049 100%);color:white}.secondary-btn.svelte-kpzu9m.svelte-kpzu9m{background:linear-gradient(135deg, #3498db 0%, #2980b9 100%);color:white}.danger-btn.svelte-kpzu9m.svelte-kpzu9m{background:linear-gradient(135deg, #f44336 0%, #d32f2f 100%);color:white;padding:0.5rem 1rem;font-size:0.9rem}.success-btn.svelte-kpzu9m.svelte-kpzu9m{background:linear-gradient(135deg, #4CAF50 0%, #45a049 100%);color:white}button.svelte-kpzu9m.svelte-kpzu9m:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0, 0, 0, 0.2)}button.svelte-kpzu9m.svelte-kpzu9m:disabled{background:#555;cursor:not-allowed;transform:none;box-shadow:none}input.svelte-kpzu9m.svelte-kpzu9m{font-size:1rem;padding:0.75rem 1rem;border-radius:8px;border:2px solid rgba(255, 255, 255, 0.1);background:rgba(255, 255, 255, 0.05);color:#ffffff;width:100%;max-width:300px;transition:all 0.2s ease}input.svelte-kpzu9m.svelte-kpzu9m:focus{outline:none;border-color:#4CAF50;box-shadow:0 0 0 2px rgba(76, 175, 80, 0.2)}input.svelte-kpzu9m.svelte-kpzu9m::placeholder{color:rgba(255, 255, 255, 0.4)}@media(max-width: 768px){main.svelte-kpzu9m.svelte-kpzu9m{padding:1rem}.content-container.svelte-kpzu9m.svelte-kpzu9m{padding:1rem}.info-panel.svelte-kpzu9m.svelte-kpzu9m{grid-template-columns:1fr}.control-panel.svelte-kpzu9m.svelte-kpzu9m{flex-direction:column}.map-container.svelte-kpzu9m.svelte-kpzu9m{height:50vh}button.svelte-kpzu9m.svelte-kpzu9m{width:100%}}.leaflet-container{width:100%;height:100%}.leaflet-control-attribution{font-size:0.8rem !important;background-color:rgba(0, 0, 0, 0.7) !important;color:#fff !important}.leaflet-control-attribution a{color:#4CAF50 !important}.leaflet-draw-toolbar a,.leaflet-control-zoom a{background:rgba(255, 255, 255, 0.1) !important;border:1px solid rgba(255, 255, 255, 0.2) !important;color:#fff !important;backdrop-filter:blur(4px)}.leaflet-draw-toolbar a:hover,.leaflet-control-zoom a:hover{background:rgba(255, 255, 255, 0.2) !important}.leaflet-draw-toolbar{background:none !important}.leaflet-draw-toolbar a{background-color:white !important;border:2px solid rgba(0,0,0,0.2);width:34px !important;height:34px !important;line-height:34px !important;margin-bottom:5px !important;border-radius:4px !important;position:relative !important;display:flex !important;align-items:center !important;justify-content:center !important}.leaflet-draw-toolbar a:hover{background:#f4f4f4}.leaflet-draw-draw-polygon::before{content:"" !important;display:block !important;width:20px !important;height:20px !important;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cpath fill='none' stroke='%23333' stroke-width='2' d='M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5'/%3E%3C/svg%3E") !important;background-size:20px !important;background-repeat:no-repeat !important;background-position:center !important}.leaflet-draw-draw-rectangle::before{content:"" !important;display:block !important;width:20px !important;height:20px !important;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Crect fill='none' stroke='%23333' stroke-width='2' x='3' y='3' width='18' height='18' rx='2'/%3E%3C/svg%3E") !important;background-size:20px !important;background-repeat:no-repeat !important;background-position:center !important}.leaflet-draw-edit-edit::before{content:"" !important;display:block !important;width:20px !important;height:20px !important;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cpath fill='none' stroke='%23333' stroke-width='2' d='M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7'/%3E%3Cpath fill='none' stroke='%23333' stroke-width='2' d='M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z'/%3E%3C/svg%3E") !important;background-size:20px !important;background-repeat:no-repeat !important;background-position:center !important}.leaflet-draw-edit-remove::before{content:"" !important;display:block !important;width:20px !important;height:20px !important;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cpath fill='none' stroke='%23333' stroke-width='2' d='M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M10 11v6M14 11v6'/%3E%3C/svg%3E") !important;background-size:20px !important;background-repeat:no-repeat !important;background-position:center !important}.current-location-marker{background:none;border:none}.marker-dot{width:12px;height:12px;background-color:#4CAF50;border:2px solid white;border-radius:50%;box-shadow:0 0 0 2px rgba(76, 175, 80, 0.4);position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.marker-pulse{width:24px;height:24px;background-color:rgba(76, 175, 80, 0.2);border-radius:50%;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);animation:svelte-kpzu9m-pulse 1.5s ease-in-out infinite}@keyframes svelte-kpzu9m-pulse{0%{transform:translate(-50%, -50%) scale(0.5);opacity:1}100%{transform:translate(-50%, -50%) scale(2);opacity:0}}.custom-draw-button{margin:5px;padding:5px 10px;background:white;border:2px solid rgba(0,0,0,0.2);border-radius:4px;cursor:pointer}.custom-draw-button:hover{background:#f4f4f4}.geofence-item.svelte-kpzu9m.svelte-kpzu9m{display:flex;justify-content:space-between;align-items:center;padding:0.5rem;margin:0.5rem 0;background-color:#f5f5f5;border-radius:4px}.button-group.svelte-kpzu9m.svelte-kpzu9m{display:flex;gap:0.5rem}.rename-input.svelte-kpzu9m.svelte-kpzu9m{flex:1;padding:0.25rem 0.5rem;border:1px solid #ccc;border-radius:4px;margin-right:0.5rem}.edit-btn.svelte-kpzu9m.svelte-kpzu9m{background-color:#2196F3;color:white;border:none;padding:0.25rem 0.5rem;border-radius:4px;cursor:pointer}.edit-btn.svelte-kpzu9m.svelte-kpzu9m:hover{background-color:#1976D2}`,
  map: `{"version":3,"file":"App.svelte","sources":["App.svelte"],"sourcesContent":["<script lang=\\"ts\\">import { onMount, onDestroy } from \\"svelte\\";\\nimport L from \\"leaflet\\";\\nimport \\"leaflet/dist/leaflet.css\\";\\nimport \\"leaflet-draw\\";\\nimport \\"leaflet-draw/dist/leaflet.draw.css\\";\\ndelete L.Icon.Default.prototype._getIconUrl;\\nL.Icon.Default.mergeOptions({\\n  iconRetinaUrl: \\"/leaflet/marker-icon-2x.png\\",\\n  iconUrl: \\"/leaflet/marker-icon.png\\",\\n  shadowUrl: \\"/leaflet/marker-shadow.png\\"\\n});\\nlet map = null;\\nlet mapElement;\\nlet drawnItems;\\nlet position = null;\\nlet geofences = /* @__PURE__ */ new Map();\\nlet selectedGeofence = null;\\nlet geofenceName = \\"\\";\\nlet status = \\"\\";\\nlet insideGeofences = [];\\nlet outsideGeofences = [];\\nlet watching = false;\\nlet mapInitialized = false;\\nlet watchId;\\nlet currentLocationMarker;\\nlet locationCircle;\\nlet checkInterval = null;\\nlet notificationPermission = \\"default\\";\\nconst CHECK_INTERVAL_MS = 2 * 60 * 1e3;\\nconst customIcon = L.icon({\\n  iconUrl: \\"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png\\",\\n  shadowUrl: \\"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png\\",\\n  iconSize: [25, 41],\\n  iconAnchor: [12, 41],\\n  popupAnchor: [1, -34],\\n  shadowSize: [41, 41]\\n});\\nfunction isPointInPolygon(point, polygon) {\\n  let inside = false;\\n  for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\\n    const xi = polygon[i].lat;\\n    const yi = polygon[i].lng;\\n    const xj = polygon[j].lat;\\n    const yj = polygon[j].lng;\\n    const intersect = yi > point.lng !== yj > point.lng && point.lat < (xj - xi) * (point.lng - yi) / (yj - yi) + xi;\\n    if (intersect) inside = !inside;\\n  }\\n  return inside;\\n}\\nfunction isPointInCircle(point, center, radius) {\\n  const R = 6371e3;\\n  const \\\\u03C61 = point.lat * Math.PI / 180;\\n  const \\\\u03C62 = center.lat * Math.PI / 180;\\n  const \\\\u0394\\\\u03C6 = (center.lat - point.lat) * Math.PI / 180;\\n  const \\\\u0394\\\\u03BB = (center.lng - point.lng) * Math.PI / 180;\\n  const a = Math.sin(\\\\u0394\\\\u03C6 / 2) * Math.sin(\\\\u0394\\\\u03C6 / 2) + Math.cos(\\\\u03C61) * Math.cos(\\\\u03C62) * Math.sin(\\\\u0394\\\\u03BB / 2) * Math.sin(\\\\u0394\\\\u03BB / 2);\\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\\n  const distance = R * c;\\n  return distance <= radius;\\n}\\nfunction checkGeofences(currentPosition) {\\n  if (!currentPosition) return;\\n  const newInsideGeofences = [];\\n  const newOutsideGeofences = [];\\n  geofences.forEach((fence, name) => {\\n    let isInside = false;\\n    if (fence.type === \\"circle\\") {\\n      isInside = isPointInCircle(currentPosition, fence.center, fence.radius);\\n    } else if (fence.type === \\"polygon\\" || fence.type === \\"rectangle\\") {\\n      isInside = isPointInPolygon(currentPosition, fence.coordinates);\\n    }\\n    if (isInside) {\\n      newInsideGeofences.push(name);\\n      if (!insideGeofences.includes(name)) {\\n        if (\\"Notification\\" in window && notificationPermission === \\"granted\\") {\\n          new Notification(\\"Geofence Alert\\", {\\n            body: \`You have entered \${name}\`,\\n            icon: \\"/vite.svg\\"\\n          });\\n        }\\n      }\\n    } else {\\n      newOutsideGeofences.push(name);\\n      if (insideGeofences.includes(name)) {\\n        if (\\"Notification\\" in window && notificationPermission === \\"granted\\") {\\n          new Notification(\\"Geofence Alert\\", {\\n            body: \`You have left \${name}\`,\\n            icon: \\"/vite.svg\\"\\n          });\\n        }\\n      }\\n    }\\n  });\\n  insideGeofences = newInsideGeofences;\\n  outsideGeofences = newOutsideGeofences;\\n  if (insideGeofences.length > 0) {\\n    status = \`Inside geofence(s): \${insideGeofences.join(\\", \\")}\`;\\n  } else {\\n    status = \\"Outside all geofences\\";\\n  }\\n}\\nfunction startPeriodicCheck() {\\n  if (checkInterval) return;\\n  checkInterval = window.setInterval(() => {\\n    if (position) {\\n      checkGeofences(position);\\n    }\\n  }, CHECK_INTERVAL_MS);\\n}\\nfunction stopPeriodicCheck() {\\n  if (checkInterval) {\\n    window.clearInterval(checkInterval);\\n    checkInterval = null;\\n  }\\n}\\nasync function updatePosition(pos) {\\n  try {\\n    if (!map || !pos || !pos.coords) return;\\n    const { latitude: lat, longitude: lng, accuracy } = pos.coords;\\n    const newPosition = { lat, lng };\\n    position = newPosition;\\n    if (!currentLocationMarker) {\\n      currentLocationMarker = L.marker([lat, lng], { icon: customIcon }).addTo(map);\\n    } else {\\n      currentLocationMarker.setLatLng([lat, lng]);\\n    }\\n    if (!locationCircle) {\\n      locationCircle = L.circle([lat, lng], { radius: accuracy }).addTo(map);\\n    } else {\\n      locationCircle.setLatLng([lat, lng]);\\n      locationCircle.setRadius(accuracy);\\n    }\\n    checkGeofences(newPosition);\\n    if (\\"serviceWorker\\" in navigator) {\\n      const registration = await navigator.serviceWorker.ready;\\n      const locationUpdate = {\\n        timestamp: (/* @__PURE__ */ new Date()).getTime(),\\n        coords: { lat, lng, accuracy },\\n        isInsideGeofence: insideGeofences.length > 0,\\n        geofenceName: insideGeofences.join(\\", \\")\\n      };\\n      registration.active?.postMessage({\\n        type: \\"store-location\\",\\n        location: locationUpdate\\n      });\\n      try {\\n        if (\\"sync\\" in registration) {\\n          await registration.sync.register(\\"location-sync\\");\\n        }\\n      } catch (error) {\\n        console.warn(\\"Background sync failed:\\", error);\\n      }\\n    }\\n    status = insideGeofences.length > 0 ? \`Inside geofence(s): \${insideGeofences.join(\\", \\")}\` : \\"Outside all geofences\\";\\n  } catch (error) {\\n    console.error(\\"Error updating position:\\", error);\\n    status = \\"Error updating position\\";\\n  }\\n}\\nasync function initializeMap() {\\n  try {\\n    if (!mapElement) {\\n      console.error(\\"Map element not found\\");\\n      return;\\n    }\\n    map = L.map(mapElement, {\\n      zoomControl: true,\\n      // Show zoom controls\\n      keyboard: true,\\n      // Enable keyboard navigation\\n      minZoom: 1,\\n      // Minimum zoom level (world view)\\n      maxZoom: 22,\\n      // Maximum zoom level (very detailed street level)\\n      zoomDelta: 0.5,\\n      // Allow finer zoom control\\n      zoomSnap: 0.5,\\n      // Snap to 0.5 zoom levels\\n      wheelDebounceTime: 40\\n      // Smoother wheel zooming\\n    }).setView([0, 0], 2);\\n    L.control.scale().addTo(map);\\n    const ZoomInfo = L.Control.extend({\\n      onAdd: function(map2) {\\n        const container = L.DomUtil.create(\\"div\\", \\"leaflet-control leaflet-control-zoom-info\\");\\n        container.style.backgroundColor = \\"white\\";\\n        container.style.padding = \\"5px\\";\\n        container.style.margin = \\"10px\\";\\n        container.style.border = \\"2px solid rgba(0,0,0,0.2)\\";\\n        container.style.borderRadius = \\"4px\\";\\n        container.innerHTML = \`Zoom: \${map2.getZoom()}\`;\\n        map2.on(\\"zoomend\\", () => {\\n          container.innerHTML = \`Zoom: \${map2.getZoom()}\`;\\n        });\\n        return container;\\n      }\\n    });\\n    new ZoomInfo({ position: \\"bottomleft\\" }).addTo(map);\\n    L.tileLayer(\\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\\", {\\n      attribution: \\" OpenStreetMap contributors\\",\\n      maxNativeZoom: 19,\\n      // Maximum zoom level of the tile server\\n      maxZoom: 22\\n      // Maximum zoom level for the map\\n    }).addTo(map);\\n    drawnItems = new L.FeatureGroup();\\n    map.addLayer(drawnItems);\\n    const drawControl = new L.Control.Draw({\\n      draw: {\\n        polyline: false,\\n        rectangle: false,\\n        // Disable rectangle\\n        polygon: {\\n          allowIntersection: false,\\n          shapeOptions: {\\n            color: \\"#4CAF50\\",\\n            fillColor: \\"#4CAF50\\",\\n            fillOpacity: 0.2\\n          }\\n        },\\n        circle: {\\n          shapeOptions: {\\n            color: \\"#4CAF50\\",\\n            fillColor: \\"#4CAF50\\",\\n            fillOpacity: 0.2\\n          }\\n        },\\n        marker: false\\n      },\\n      edit: {\\n        featureGroup: drawnItems\\n      }\\n    });\\n    map.addControl(drawControl);\\n    map.on(\\"draw:created\\", (e) => {\\n      const layer = e.layer;\\n      const type = e.layerType;\\n      if (type === \\"circle\\") {\\n        const radius2 = layer.getRadius();\\n        layer.bindTooltip(\`Radius: \${radius2.toFixed(2)}m\`);\\n      } else if (type === \\"polygon\\" || type === \\"rectangle\\") {\\n        const latlngs = layer.getLatLngs()[0];\\n        const area = L.GeometryUtil.geodesicArea(latlngs);\\n        layer.bindTooltip(\`Area: \${area.toFixed(2)}m\\\\xB2\`);\\n      }\\n      let center;\\n      let radius;\\n      let coordinates = [];\\n      if (type === \\"circle\\") {\\n        const latlng = layer.getLatLng();\\n        center = { lat: latlng.lat, lng: latlng.lng };\\n        radius = layer.getRadius();\\n      } else {\\n        const latLngs = layer.getLatLngs()[0];\\n        coordinates = latLngs.map((ll) => ({ lat: ll.lat, lng: ll.lng }));\\n        const bounds = layer.getBounds();\\n        const boundsCenter = bounds.getCenter();\\n        center = { lat: boundsCenter.lat, lng: boundsCenter.lng };\\n        radius = bounds.getNorthEast().distanceTo(bounds.getCenter());\\n      }\\n      const id = crypto.randomUUID();\\n      const geofence = {\\n        id,\\n        name: geofenceName || \`Geofence \${geofences.size + 1}\`,\\n        coordinates,\\n        type,\\n        center,\\n        radius,\\n        layer\\n      };\\n      layer.geofenceName = geofence.name;\\n      geofences.set(geofence.name, geofence);\\n      geofences = geofences;\\n      drawnItems.addLayer(layer);\\n      status = \`Created geofence: \${geofence.name}\`;\\n      geofenceName = \\"\\";\\n    });\\n    if (\\"geolocation\\" in navigator) {\\n      navigator.geolocation.getCurrentPosition(\\n        (pos) => {\\n          const { latitude: lat, longitude: lng } = pos.coords;\\n          if (map) {\\n            map.setView([lat, lng], 13);\\n            if (currentLocationMarker) {\\n              currentLocationMarker.setLatLng([lat, lng]);\\n            } else {\\n              currentLocationMarker = L.marker([lat, lng], { icon: customIcon }).addTo(map);\\n            }\\n          }\\n        },\\n        (error) => {\\n          console.error(\\"Error getting location:\\", error);\\n          status = \\"Error getting location. Using default view.\\";\\n        }\\n      );\\n    }\\n    startMonitoring();\\n  } catch (error) {\\n    console.error(\\"Error initializing map:\\", error);\\n    status = \\"Error initializing map. Please refresh the page.\\";\\n  }\\n}\\nasync function startMonitoring() {\\n  if (!watching) {\\n    watching = true;\\n    if (\\"Notification\\" in window && notificationPermission === \\"default\\") {\\n      notificationPermission = await Notification.requestPermission().then((permission) => permission);\\n    }\\n    startPeriodicCheck();\\n    if (\\"geolocation\\" in navigator) {\\n      watchId = navigator.geolocation.watchPosition(\\n        updatePosition,\\n        (error) => {\\n          console.error(\\"Error watching position:\\", error);\\n          status = \\"Error watching position\\";\\n        },\\n        {\\n          enableHighAccuracy: true,\\n          timeout: 5e3,\\n          maximumAge: 0\\n        }\\n      );\\n    }\\n  }\\n}\\nfunction handleLocationError(error) {\\n  console.error(\\"Location error:\\", error);\\n  switch (error.code) {\\n    case error.PERMISSION_DENIED:\\n      status = \\"Please enable location access in your browser settings\\";\\n      watching = false;\\n      break;\\n    case error.POSITION_UNAVAILABLE:\\n      status = \\"Location information is unavailable\\";\\n      break;\\n    case error.TIMEOUT:\\n      status = \\"Location request timed out\\";\\n      if (watching) {\\n        navigator.geolocation.getCurrentPosition(\\n          updatePosition,\\n          () => {\\n          },\\n          {\\n            enableHighAccuracy: false,\\n            timeout: 1e4,\\n            maximumAge: 3e4\\n          }\\n        );\\n      }\\n      break;\\n    default:\\n      status = \`Location error: \${error.message}\`;\\n  }\\n}\\nfunction stopMonitoring() {\\n  if (watchId) {\\n    navigator.geolocation.clearWatch(watchId);\\n    watchId = null;\\n    watching = false;\\n    status = \\"Monitoring stopped\\";\\n  }\\n}\\nfunction saveGeofence() {\\n  if (!selectedGeofence || !geofenceName) return;\\n  try {\\n    console.log(\\"Saving geofence:\\", selectedGeofence);\\n    geofences.set(geofenceName, selectedGeofence);\\n    geofences = geofences;\\n    selectedGeofence = null;\\n    geofenceName = \\"\\";\\n    status = \`Saved geofence: \${geofenceName}\`;\\n  } catch (error) {\\n    console.error(\\"Error saving geofence:\\", error);\\n    status = \\"Error saving geofence\\";\\n  }\\n}\\nlet editingGeofence = null;\\nlet newGeofenceName = \\"\\";\\nfunction deleteGeofence(name) {\\n  const geofence = geofences.get(name);\\n  if (geofence && geofence.layer) {\\n    drawnItems.removeLayer(geofence.layer);\\n  }\\n  geofences.delete(name);\\n  geofences = geofences;\\n  checkGeofences(position);\\n}\\nfunction startEditingGeofence(name) {\\n  editingGeofence = name;\\n  const geofence = geofences.get(name);\\n  if (geofence) {\\n    newGeofenceName = geofence.name;\\n  }\\n}\\nfunction saveGeofenceEdit() {\\n  if (editingGeofence && newGeofenceName && newGeofenceName !== editingGeofence) {\\n    const geofence = geofences.get(editingGeofence);\\n    if (geofence) {\\n      geofences.delete(editingGeofence);\\n      geofence.name = newGeofenceName;\\n      geofences.set(newGeofenceName, geofence);\\n      geofences = geofences;\\n      checkGeofences(position);\\n    }\\n  }\\n  editingGeofence = null;\\n  newGeofenceName = \\"\\";\\n}\\nonMount(async () => {\\n  try {\\n    notificationPermission = await Notification.requestPermission().then((permission) => permission);\\n    if (\\"serviceWorker\\" in navigator) {\\n      const registration = await navigator.serviceWorker.ready;\\n      if (\\"periodicSync\\" in registration) {\\n        try {\\n          await registration.periodicSync.register(\\"periodic-geofence-check\\", {\\n            minInterval: 15 * 60 * 1e3\\n            // Minimum 15 minutes\\n          });\\n        } catch (error) {\\n          console.warn(\\"Periodic background sync could not be registered:\\", error);\\n        }\\n      }\\n      if (\\"sync\\" in registration) {\\n        try {\\n          await registration.sync.register(\\"location-sync\\");\\n        } catch (error) {\\n          console.warn(\\"Background sync could not be registered:\\", error);\\n        }\\n      }\\n    }\\n    await initializeMap();\\n  } catch (error) {\\n    console.error(\\"Error in onMount:\\", error);\\n    status = \\"Error initializing the application. Please refresh the page.\\";\\n  }\\n});\\nonDestroy(() => {\\n  stopPeriodicCheck();\\n  if (watchId) {\\n    navigator.geolocation.clearWatch(watchId);\\n    watching = false;\\n  }\\n  if (map) {\\n    map.remove();\\n    map = null;\\n  }\\n});\\n<\/script>\\n\\n<main>\\n  <div class=\\"app-container\\">\\n    <div class=\\"content-container\\">\\n      <h1>Geofence PWA</h1>\\n      \\n      <div class=\\"status-bar\\">\\n        <p>{status}</p>\\n      </div>\\n\\n      <div class=\\"control-panel\\">\\n        <button class=\\"primary-btn\\" on:click={startMonitoring} disabled={watching}>\\n          Start Monitoring\\n        </button>\\n        <button class=\\"secondary-btn\\" on:click={stopMonitoring} disabled={!watching}>\\n          Stop Monitoring\\n        </button>\\n      </div>\\n\\n      <div class=\\"map-section\\">\\n        <div bind:this={mapElement} class=\\"map-container\\"></div>\\n      </div>\\n\\n      {#if selectedGeofence}\\n        <div class=\\"geofence-controls\\">\\n          <input\\n            type=\\"text\\"\\n            bind:value={geofenceName}\\n            placeholder=\\"Enter geofence name\\"\\n          />\\n          <button class=\\"success-btn\\" on:click={saveGeofence} disabled={!geofenceName}>\\n            Save Geofence\\n          </button>\\n        </div>\\n      {/if}\\n\\n      <div class=\\"info-panel\\">\\n        <div class=\\"geofence-status\\">\\n          <h3>Geofence Status</h3>\\n          {#if geofences.size === 0}\\n            <p class=\\"no-data\\">No geofences defined yet</p>\\n          {:else if !position}\\n            <p class=\\"no-data\\">Waiting for location...</p>\\n          {:else}\\n            <div class=\\"status-grid\\">\\n              {#if insideGeofences.length > 0}\\n                <div class=\\"status-section inside\\">\\n                  <h4>Inside Geofences:</h4>\\n                  <ul>\\n                    {#each insideGeofences as fence}\\n                      <li>{fence}</li>\\n                    {/each}\\n                  </ul>\\n                </div>\\n              {/if}\\n              {#if outsideGeofences.length > 0}\\n                <div class=\\"status-section outside\\">\\n                  <h4>Outside Geofences:</h4>\\n                  <ul>\\n                    {#each outsideGeofences as fence}\\n                      <li>{fence}</li>\\n                    {/each}\\n                  </ul>\\n                </div>\\n              {/if}\\n            </div>\\n          {/if}\\n        </div>\\n\\n        <div class=\\"geofence-list\\">\\n          <h3>Saved Geofences ({geofences.size})</h3>\\n          {#if geofences.size === 0}\\n            <p class=\\"no-data\\">No geofences saved</p>\\n          {:else}\\n            {#each Array.from(geofences) as [name, _]}\\n              <div class=\\"geofence-item\\">\\n                {#if editingGeofence === name}\\n                  <input\\n                    type=\\"text\\"\\n                    bind:value={newGeofenceName}\\n                    placeholder=\\"Enter new name\\"\\n                    class=\\"rename-input\\"\\n                  />\\n                  <div class=\\"button-group\\">\\n                    <button class=\\"success-btn\\" on:click={saveGeofenceEdit}>Save</button>\\n                    <button class=\\"secondary-btn\\" on:click={() => {\\n                      editingGeofence = null;\\n                      newGeofenceName = '';\\n                    }}>Cancel</button>\\n                  </div>\\n                {:else}\\n                  <span>{name}</span>\\n                  <div class=\\"button-group\\">\\n                    <button class=\\"edit-btn\\" on:click={() => startEditingGeofence(name)}>Rename</button>\\n                    <button class=\\"danger-btn\\" on:click={() => deleteGeofence(name)}>Delete</button>\\n                  </div>\\n                {/if}\\n              </div>\\n            {/each}\\n          {/if}\\n        </div>\\n\\n        {#if position}\\n          <div class=\\"position-info\\">\\n            <h3>Current Position</h3>\\n            <div class=\\"position-grid\\">\\n              <div class=\\"position-item\\">\\n                <span class=\\"label\\">Latitude:</span>\\n                <span class=\\"value\\">{position.lat.toFixed(6)}°</span>\\n              </div>\\n              <div class=\\"position-item\\">\\n                <span class=\\"label\\">Longitude:</span>\\n                <span class=\\"value\\">{position.lng.toFixed(6)}°</span>\\n              </div>\\n            </div>\\n          </div>\\n        {/if}\\n      </div>\\n    </div>\\n  </div>\\n</main>\\n\\n<style>\\n  :global(body) {\\n    margin: 0;\\n    padding: 0;\\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\\n    background: linear-gradient(135deg, #1a1f2c 0%, #2d3436 100%);\\n    color: #ffffff;\\n    min-height: 100vh;\\n  }\\n\\n  main {\\n    min-height: 100vh;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    padding: 2rem;\\n  }\\n\\n  .app-container {\\n    width: 100%;\\n    max-width: 1200px;\\n    margin: 0 auto;\\n  }\\n\\n  .content-container {\\n    display: flex;\\n    flex-direction: column;\\n    gap: 1.5rem;\\n    align-items: center;\\n    background: rgba(255, 255, 255, 0.05);\\n    padding: 2rem;\\n    border-radius: 20px;\\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\\n    backdrop-filter: blur(10px);\\n  }\\n\\n  h1 {\\n    color: #ffffff;\\n    font-size: 2.5rem;\\n    text-align: center;\\n    font-weight: 600;\\n    margin: 0;\\n    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\\n  }\\n\\n  h3 {\\n    color: #ffffff;\\n    font-size: 1.5rem;\\n    margin: 0 0 1rem 0;\\n    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\\n  }\\n\\n  .map-section {\\n    width: 100%;\\n    padding: 1rem;\\n    background: rgba(0, 0, 0, 0.2);\\n    border-radius: 16px;\\n  }\\n\\n  .map-container {\\n    width: 100%;\\n    height: 500px;\\n    margin: 20px 0;\\n    border-radius: 8px;\\n    overflow: hidden;\\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\\n  }\\n\\n  .control-panel {\\n    display: flex;\\n    gap: 1rem;\\n    justify-content: center;\\n    width: 100%;\\n  }\\n\\n  .info-panel {\\n    display: grid;\\n    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\\n    gap: 1.5rem;\\n    width: 100%;\\n  }\\n\\n  .geofence-status, .geofence-list, .position-info {\\n    background: rgba(255, 255, 255, 0.1);\\n    padding: 1.5rem;\\n    border-radius: 12px;\\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\\n  }\\n\\n  .status-grid {\\n    display: flex;\\n    flex-direction: column;\\n    gap: 1rem;\\n  }\\n\\n  .status-section {\\n    padding: 1rem;\\n    border-radius: 8px;\\n  }\\n\\n  .status-section.inside {\\n    background: rgba(76, 175, 80, 0.2);\\n    border-left: 4px solid #4CAF50;\\n  }\\n\\n  .status-section.outside {\\n    background: rgba(244, 67, 54, 0.2);\\n    border-left: 4px solid #f44336;\\n  }\\n\\n  .status-section h4 {\\n    margin: 0 0 0.5rem 0;\\n    color: #ffffff;\\n  }\\n\\n  .status-section ul {\\n    margin: 0;\\n    padding-left: 1.5rem;\\n    color: rgba(255, 255, 255, 0.9);\\n  }\\n\\n  .position-grid {\\n    display: grid;\\n    gap: 0.5rem;\\n  }\\n\\n  .position-item {\\n    display: flex;\\n    justify-content: space-between;\\n    align-items: center;\\n    padding: 0.5rem;\\n    background: rgba(255, 255, 255, 0.05);\\n    border-radius: 6px;\\n  }\\n\\n  .label {\\n    color: rgba(255, 255, 255, 0.7);\\n  }\\n\\n  .value {\\n    font-family: monospace;\\n    font-size: 1.1rem;\\n    color: #4CAF50;\\n  }\\n\\n  .no-data {\\n    color: rgba(255, 255, 255, 0.6);\\n    text-align: center;\\n    font-style: italic;\\n  }\\n\\n  .status-bar {\\n    width: 100%;\\n    background: rgba(255, 255, 255, 0.1);\\n    padding: 1rem;\\n    border-radius: 8px;\\n    text-align: center;\\n  }\\n\\n  button {\\n    font-size: 1rem;\\n    padding: 0.75rem 1.5rem;\\n    border-radius: 8px;\\n    border: none;\\n    cursor: pointer;\\n    font-weight: 500;\\n    transition: all 0.2s ease;\\n    text-transform: uppercase;\\n    letter-spacing: 0.5px;\\n  }\\n\\n  .primary-btn {\\n    background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);\\n    color: white;\\n  }\\n\\n  .secondary-btn {\\n    background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);\\n    color: white;\\n  }\\n\\n  .danger-btn {\\n    background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);\\n    color: white;\\n    padding: 0.5rem 1rem;\\n    font-size: 0.9rem;\\n  }\\n\\n  .success-btn {\\n    background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);\\n    color: white;\\n  }\\n\\n  button:hover {\\n    transform: translateY(-2px);\\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\\n  }\\n\\n  button:disabled {\\n    background: #555;\\n    cursor: not-allowed;\\n    transform: none;\\n    box-shadow: none;\\n  }\\n\\n  input {\\n    font-size: 1rem;\\n    padding: 0.75rem 1rem;\\n    border-radius: 8px;\\n    border: 2px solid rgba(255, 255, 255, 0.1);\\n    background: rgba(255, 255, 255, 0.05);\\n    color: #ffffff;\\n    width: 100%;\\n    max-width: 300px;\\n    transition: all 0.2s ease;\\n  }\\n\\n  input:focus {\\n    outline: none;\\n    border-color: #4CAF50;\\n    box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2);\\n  }\\n\\n  input::placeholder {\\n    color: rgba(255, 255, 255, 0.4);\\n  }\\n\\n  @media (max-width: 768px) {\\n    main {\\n      padding: 1rem;\\n    }\\n\\n    .content-container {\\n      padding: 1rem;\\n    }\\n\\n    .info-panel {\\n      grid-template-columns: 1fr;\\n    }\\n\\n    .control-panel {\\n      flex-direction: column;\\n    }\\n\\n    .map-container {\\n      height: 50vh;\\n    }\\n\\n    button {\\n      width: 100%;\\n    }\\n  }\\n\\n  :global(.leaflet-container) {\\n    width: 100%;\\n    height: 100%;\\n  }\\n\\n  :global(.leaflet-control-attribution) {\\n    font-size: 0.8rem !important;\\n    background-color: rgba(0, 0, 0, 0.7) !important;\\n    color: #fff !important;\\n  }\\n\\n  :global(.leaflet-control-attribution a) {\\n    color: #4CAF50 !important;\\n  }\\n\\n  :global(.leaflet-draw-toolbar a),\\n  :global(.leaflet-control-zoom a) {\\n    background: rgba(255, 255, 255, 0.1) !important;\\n    border: 1px solid rgba(255, 255, 255, 0.2) !important;\\n    color: #fff !important;\\n    backdrop-filter: blur(4px);\\n  }\\n\\n  :global(.leaflet-draw-toolbar a:hover),\\n  :global(.leaflet-control-zoom a:hover) {\\n    background: rgba(255, 255, 255, 0.2) !important;\\n  }\\n\\n  :global(.leaflet-draw-toolbar) {\\n    background: none !important;\\n  }\\n\\n  :global(.leaflet-draw-toolbar a) {\\n    background-color: white !important;\\n    border: 2px solid rgba(0,0,0,0.2);\\n    width: 34px !important;\\n    height: 34px !important;\\n    line-height: 34px !important;\\n    margin-bottom: 5px !important;\\n    border-radius: 4px !important;\\n    position: relative !important;\\n    display: flex !important;\\n    align-items: center !important;\\n    justify-content: center !important;\\n  }\\n\\n  :global(.leaflet-draw-toolbar a:hover) {\\n    background: #f4f4f4;\\n  }\\n\\n  :global(.leaflet-draw-draw-polygon::before) {\\n    content: \\"\\" !important;\\n    display: block !important;\\n    width: 20px !important;\\n    height: 20px !important;\\n    background-image: url(\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cpath fill='none' stroke='%23333' stroke-width='2' d='M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5'/%3E%3C/svg%3E\\") !important;\\n    background-size: 20px !important;\\n    background-repeat: no-repeat !important;\\n    background-position: center !important;\\n  }\\n\\n  :global(.leaflet-draw-draw-rectangle::before) {\\n    content: \\"\\" !important;\\n    display: block !important;\\n    width: 20px !important;\\n    height: 20px !important;\\n    background-image: url(\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Crect fill='none' stroke='%23333' stroke-width='2' x='3' y='3' width='18' height='18' rx='2'/%3E%3C/svg%3E\\") !important;\\n    background-size: 20px !important;\\n    background-repeat: no-repeat !important;\\n    background-position: center !important;\\n  }\\n\\n  :global(.leaflet-draw-edit-edit::before) {\\n    content: \\"\\" !important;\\n    display: block !important;\\n    width: 20px !important;\\n    height: 20px !important;\\n    background-image: url(\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cpath fill='none' stroke='%23333' stroke-width='2' d='M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7'/%3E%3Cpath fill='none' stroke='%23333' stroke-width='2' d='M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z'/%3E%3C/svg%3E\\") !important;\\n    background-size: 20px !important;\\n    background-repeat: no-repeat !important;\\n    background-position: center !important;\\n  }\\n\\n  :global(.leaflet-draw-edit-remove::before) {\\n    content: \\"\\" !important;\\n    display: block !important;\\n    width: 20px !important;\\n    height: 20px !important;\\n    background-image: url(\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cpath fill='none' stroke='%23333' stroke-width='2' d='M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M10 11v6M14 11v6'/%3E%3C/svg%3E\\") !important;\\n    background-size: 20px !important;\\n    background-repeat: no-repeat !important;\\n    background-position: center !important;\\n  }\\n\\n  :global(.current-location-marker) {\\n    background: none;\\n    border: none;\\n  }\\n\\n  :global(.marker-dot) {\\n    width: 12px;\\n    height: 12px;\\n    background-color: #4CAF50;\\n    border: 2px solid white;\\n    border-radius: 50%;\\n    box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.4);\\n    position: absolute;\\n    top: 50%;\\n    left: 50%;\\n    transform: translate(-50%, -50%);\\n  }\\n\\n  :global(.marker-pulse) {\\n    width: 24px;\\n    height: 24px;\\n    background-color: rgba(76, 175, 80, 0.2);\\n    border-radius: 50%;\\n    position: absolute;\\n    top: 50%;\\n    left: 50%;\\n    transform: translate(-50%, -50%);\\n    animation: pulse 1.5s ease-in-out infinite;\\n  }\\n\\n  @keyframes pulse {\\n    0% {\\n      transform: translate(-50%, -50%) scale(0.5);\\n      opacity: 1;\\n    }\\n    100% {\\n      transform: translate(-50%, -50%) scale(2);\\n      opacity: 0;\\n    }\\n  }\\n\\n  :global(.custom-draw-button) {\\n    margin: 5px;\\n    padding: 5px 10px;\\n    background: white;\\n    border: 2px solid rgba(0,0,0,0.2);\\n    border-radius: 4px;\\n    cursor: pointer;\\n  }\\n\\n  :global(.custom-draw-button:hover) {\\n    background: #f4f4f4;\\n  }\\n\\n  .geofence-item {\\n    display: flex;\\n    justify-content: space-between;\\n    align-items: center;\\n    padding: 0.5rem;\\n    margin: 0.5rem 0;\\n    background-color: #f5f5f5;\\n    border-radius: 4px;\\n  }\\n\\n  .button-group {\\n    display: flex;\\n    gap: 0.5rem;\\n  }\\n\\n  .rename-input {\\n    flex: 1;\\n    padding: 0.25rem 0.5rem;\\n    border: 1px solid #ccc;\\n    border-radius: 4px;\\n    margin-right: 0.5rem;\\n  }\\n\\n  .edit-btn {\\n    background-color: #2196F3;\\n    color: white;\\n    border: none;\\n    padding: 0.25rem 0.5rem;\\n    border-radius: 4px;\\n    cursor: pointer;\\n  }\\n\\n  .edit-btn:hover {\\n    background-color: #1976D2;\\n  }\\n</style>\\n"],"names":[],"mappings":"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"}`
};
const App = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  delete L.Icon.Default.prototype._getIconUrl;
  L.Icon.Default.mergeOptions({
    iconRetinaUrl: "/leaflet/marker-icon-2x.png",
    iconUrl: "/leaflet/marker-icon.png",
    shadowUrl: "/leaflet/marker-shadow.png"
  });
  let mapElement;
  let geofences = /* @__PURE__ */ new Map();
  let status = "";
  L.icon({
    iconUrl: "https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png",
    shadowUrl: "https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png",
    iconSize: [25, 41],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
  });
  let editingGeofence = null;
  let newGeofenceName = "";
  onDestroy(() => {
  });
  $$result.css.add(css);
  return `<main class="svelte-kpzu9m"><div class="app-container svelte-kpzu9m"><div class="content-container svelte-kpzu9m"><h1 class="svelte-kpzu9m" data-svelte-h="svelte-1t5vslm">Geofence PWA</h1> <div class="status-bar svelte-kpzu9m"><p>${escape(status)}</p></div> <div class="control-panel svelte-kpzu9m"><button class="primary-btn svelte-kpzu9m" ${""}>Start Monitoring</button> <button class="secondary-btn svelte-kpzu9m" ${"disabled"}>Stop Monitoring</button></div> <div class="map-section svelte-kpzu9m"><div class="map-container svelte-kpzu9m"${add_attribute("this", mapElement, 0)}></div></div> ${``} <div class="info-panel svelte-kpzu9m"><div class="geofence-status svelte-kpzu9m"><h3 class="svelte-kpzu9m" data-svelte-h="svelte-1lz0k2u">Geofence Status</h3> ${geofences.size === 0 ? `<p class="no-data svelte-kpzu9m" data-svelte-h="svelte-vnpbua">No geofences defined yet</p>` : `${`<p class="no-data svelte-kpzu9m" data-svelte-h="svelte-1y1nut4">Waiting for location...</p>`}`}</div> <div class="geofence-list svelte-kpzu9m"><h3 class="svelte-kpzu9m">Saved Geofences (${escape(geofences.size)})</h3> ${geofences.size === 0 ? `<p class="no-data svelte-kpzu9m" data-svelte-h="svelte-196347e">No geofences saved</p>` : `${each(Array.from(geofences), ([name, _]) => {
    return `<div class="geofence-item svelte-kpzu9m">${editingGeofence === name ? `<input type="text" placeholder="Enter new name" class="rename-input svelte-kpzu9m"${add_attribute("value", newGeofenceName, 0)}> <div class="button-group svelte-kpzu9m"><button class="success-btn svelte-kpzu9m" data-svelte-h="svelte-mswtrf">Save</button> <button class="secondary-btn svelte-kpzu9m" data-svelte-h="svelte-1gsjooy">Cancel</button> </div>` : `<span>${escape(name)}</span> <div class="button-group svelte-kpzu9m"><button class="edit-btn svelte-kpzu9m" data-svelte-h="svelte-5y0v7o">Rename</button> <button class="danger-btn svelte-kpzu9m" data-svelte-h="svelte-upu1cn">Delete</button> </div>`} </div>`;
  })}`}</div> ${``}</div></div></div> </main>`;
});
new App({
  target: document.getElementById("app")
});
if ("serviceWorker" in navigator) {
  window.addEventListener("load", async () => {
    try {
      const registration = await navigator.serviceWorker.register("/service-worker.js");
      console.log("ServiceWorker registration successful with scope:", registration.scope);
    } catch (error) {
      console.error("ServiceWorker registration failed:", error);
    }
  });
}
